!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("remotestoragejs"));else if("function"==typeof define&&define.amd)define(["remotestoragejs"],r);else{var e=r("object"==typeof exports?require("remotestoragejs"):t.RemoteStorage);for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(this,function(t){return function(t){function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){"use strict";var n=e(1),o=e(2),i=e(6);i.defineModule("bookmarks",function(t,r){var e=i.util.extend,u={id:{type:"string"},url:{type:"string",format:"uri"},title:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}};t.declareType("archive-bookmark",{type:"object",properties:e({description:{type:"string","default":""},tags:{type:"array","default":[]},thumbnail:{description:"A base64-encoded screenshot of the bookmarked page",type:"string"}},u),required:["id","title","url"]}),t.declareType("browser-bookmark",{type:"object",properties:e({tags:{type:"array","default":[]}},u)}),t.declareType("readlater-bookmark",{type:"object",properties:e({unread:{type:"boolean","default":!0,required:!0}},u)});var a={archive:{find:function(r){var e="archive/"+r;return t.getObject(e).then(function(t){return t})},getAll:function(){return t.getAll("archive/").then(function(t){return console.log("got archive bookmarks",t),t?Object.keys(t).map(function(r){return t[r]}):[]},function(t){console.log("Something bad happened: ",t)})},searchByURL:function(r){var e=this.idForUrl(r),n="archive/"+e;return t.getObject(n)},searchByTags:function(t){return this.getAll().then(function(r){return r?r.filter(function(r){return r.tags&&n(r.tags,t).length}):[]})},store:function(r){r.id=c(r.url),r.createdAt?r.updatedAt=(new Date).toISOString():r.createdAt=(new Date).toISOString();var e="archive/"+r.id;return console.log(r),t.storeObject("archive-bookmark",e,r).then(function(){return console.log(r.id),r})},remove:function(r){var e="archive/"+r;return t.remove(e)},idForUrl:function(t){return c(t)}},client:t},c=function(t){return t=t,o(t)};return{exports:a}})},function(t,r){(function(r){"use strict";function e(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function n(t,r){var e=t?t.length:0;return!!e&&a(t,r,0)>-1}function o(t,r,e){for(var n=-1,o=t?t.length:0;++n<o;)if(e(r,t[n]))return!0;return!1}function i(t,r){for(var e=-1,n=t?t.length:0,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}function u(t,r,e,n){for(var o=t.length,i=e+(n?1:-1);n?i--:++i<o;)if(r(t[i],i,t))return i;return-1}function a(t,r,e){if(r!==r)return u(t,c,e);for(var n=e-1,o=t.length;++n<o;)if(t[n]===r)return n;return-1}function c(t){return t!==t}function f(t){return function(r){return t(r)}}function s(t,r){return t.has(r)}function l(t,r){return null==t?void 0:t[r]}function p(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(e){}return r}function h(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function d(){this.__data__=mt?mt(null):{}}function y(t){return this.has(t)&&delete this.__data__[t]}function g(t){var r=this.__data__;if(mt){var e=r[t];return e===X?void 0:e}return ht.call(r,t)?r[t]:void 0}function v(t){var r=this.__data__;return mt?void 0!==r[t]:ht.call(r,t)}function _(t,r){var e=this.__data__;return e[t]=mt&&void 0===r?X:r,this}function b(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function m(){this.__data__=[]}function j(t){var r=this.__data__,e=R(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():gt.call(r,e,1),!0}function x(t){var r=this.__data__,e=R(r,t);return e<0?void 0:r[e][1]}function S(t){return R(this.__data__,t)>-1}function T(t,r){var e=this.__data__,n=R(e,t);return n<0?e.push([t,r]):e[n][1]=r,this}function A(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function k(){this.__data__={hash:new h,map:new(bt||b),string:new h}}function O(t){return P(this,t)["delete"](t)}function B(t){return P(this,t).get(t)}function w(t){return P(this,t).has(t)}function F(t,r){return P(this,t).set(t,r),this}function I(t){var r=-1,e=t?t.length:0;for(this.__data__=new A;++r<e;)this.add(t[r])}function M(t){return this.__data__.set(t,X),this}function C(t){return this.__data__.has(t)}function R(t,r){for(var e=t.length;e--;)if(W(t[e][0],r))return e;return-1}function U(t,r,e){for(var u=e?o:n,a=t[0].length,c=t.length,l=c,p=Array(c),h=1/0,d=[];l--;){var y=t[l];l&&r&&(y=i(y,f(r))),h=_t(y.length,h),p[l]=!e&&(r||a>=120&&y.length>=120)?new I(l&&y):void 0}y=t[0];var g=-1,v=p[0];t:for(;++g<a&&d.length<h;){var _=y[g],b=r?r(_):_;if(_=e||0!==_?_:0,!(v?s(v,b):u(d,b,e))){for(l=c;--l;){var m=p[l];if(!(m?s(m,b):u(t[l],b,e)))continue t}v&&v.push(b),d.push(_)}}return d}function $(t){if(!K(t)||H(t))return!1;var r=Z(t)||p(t)?yt:nt;return r.test(L(t))}function q(t,r){return r=vt(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,i=vt(n.length-r,0),u=Array(i);++o<i;)u[o]=n[r+o];o=-1;for(var a=Array(r+1);++o<r;)a[o]=n[o];return a[r]=u,e(t,this,a)}}function E(t){return N(t)?t:[]}function P(t,r){var e=t.__data__;return D(r)?e["string"==typeof r?"string":"hash"]:e.map}function z(t,r){var e=l(t,r);return $(e)?e:void 0}function D(t){var r="undefined"==typeof t?"undefined":V(t);return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}function H(t){return!!lt&&lt in t}function L(t){if(null!=t){try{return pt.call(t)}catch(r){}try{return t+""}catch(r){}}return""}function W(t,r){return t===r||t!==t&&r!==r}function G(t){return null!=t&&J(t.length)&&!Z(t)}function N(t){return Q(t)&&G(t)}function Z(t){var r=K(t)?dt.call(t):"";return r==tt||r==rt}function J(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Y}function K(t){var r="undefined"==typeof t?"undefined":V(t);return!!t&&("object"==r||"function"==r)}function Q(t){return!!t&&"object"==("undefined"==typeof t?"undefined":V(t))}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X="__lodash_hash_undefined__",Y=9007199254740991,tt="[object Function]",rt="[object GeneratorFunction]",et=/[\\^$.*+?()[\]{}|]/g,nt=/^\[object .+?Constructor\]$/,ot="object"==("undefined"==typeof r?"undefined":V(r))&&r&&r.Object===Object&&r,it="object"==("undefined"==typeof self?"undefined":V(self))&&self&&self.Object===Object&&self,ut=ot||it||Function("return this")(),at=Array.prototype,ct=Function.prototype,ft=Object.prototype,st=ut["__core-js_shared__"],lt=function(){var t=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pt=ct.toString,ht=ft.hasOwnProperty,dt=ft.toString,yt=RegExp("^"+pt.call(ht).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=at.splice,vt=Math.max,_t=Math.min,bt=z(ut,"Map"),mt=z(Object,"create");h.prototype.clear=d,h.prototype["delete"]=y,h.prototype.get=g,h.prototype.has=v,h.prototype.set=_,b.prototype.clear=m,b.prototype["delete"]=j,b.prototype.get=x,b.prototype.has=S,b.prototype.set=T,A.prototype.clear=k,A.prototype["delete"]=O,A.prototype.get=B,A.prototype.has=w,A.prototype.set=F,I.prototype.add=I.prototype.push=M,I.prototype.has=C;var jt=q(function(t){var r=i(t,E);return r.length&&r[0]===t[0]?U(r):[]});t.exports=jt}).call(r,function(){return this}())},function(t,r,e){"use strict";!function(){var r=e(3),n=e(4).utf8,o=e(5),i=e(4).bin,u=function a(t,e){t.constructor==String?t=e&&"binary"===e.encoding?i.stringToBytes(t):n.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var u=r.bytesToWords(t),c=8*t.length,f=1732584193,s=-271733879,l=-1732584194,p=271733878,h=0;h<u.length;h++)u[h]=16711935&(u[h]<<8|u[h]>>>24)|4278255360&(u[h]<<24|u[h]>>>8);u[c>>>5]|=128<<c%32,u[(c+64>>>9<<4)+14]=c;for(var d=a._ff,y=a._gg,g=a._hh,v=a._ii,h=0;h<u.length;h+=16){var _=f,b=s,m=l,j=p;f=d(f,s,l,p,u[h+0],7,-680876936),p=d(p,f,s,l,u[h+1],12,-389564586),l=d(l,p,f,s,u[h+2],17,606105819),s=d(s,l,p,f,u[h+3],22,-1044525330),f=d(f,s,l,p,u[h+4],7,-176418897),p=d(p,f,s,l,u[h+5],12,1200080426),l=d(l,p,f,s,u[h+6],17,-1473231341),s=d(s,l,p,f,u[h+7],22,-45705983),f=d(f,s,l,p,u[h+8],7,1770035416),p=d(p,f,s,l,u[h+9],12,-1958414417),l=d(l,p,f,s,u[h+10],17,-42063),s=d(s,l,p,f,u[h+11],22,-1990404162),f=d(f,s,l,p,u[h+12],7,1804603682),p=d(p,f,s,l,u[h+13],12,-40341101),l=d(l,p,f,s,u[h+14],17,-1502002290),s=d(s,l,p,f,u[h+15],22,1236535329),f=y(f,s,l,p,u[h+1],5,-165796510),p=y(p,f,s,l,u[h+6],9,-1069501632),l=y(l,p,f,s,u[h+11],14,643717713),s=y(s,l,p,f,u[h+0],20,-373897302),f=y(f,s,l,p,u[h+5],5,-701558691),p=y(p,f,s,l,u[h+10],9,38016083),l=y(l,p,f,s,u[h+15],14,-660478335),s=y(s,l,p,f,u[h+4],20,-405537848),f=y(f,s,l,p,u[h+9],5,568446438),p=y(p,f,s,l,u[h+14],9,-1019803690),l=y(l,p,f,s,u[h+3],14,-187363961),s=y(s,l,p,f,u[h+8],20,1163531501),f=y(f,s,l,p,u[h+13],5,-1444681467),p=y(p,f,s,l,u[h+2],9,-51403784),l=y(l,p,f,s,u[h+7],14,1735328473),s=y(s,l,p,f,u[h+12],20,-1926607734),f=g(f,s,l,p,u[h+5],4,-378558),p=g(p,f,s,l,u[h+8],11,-2022574463),l=g(l,p,f,s,u[h+11],16,1839030562),s=g(s,l,p,f,u[h+14],23,-35309556),f=g(f,s,l,p,u[h+1],4,-1530992060),p=g(p,f,s,l,u[h+4],11,1272893353),l=g(l,p,f,s,u[h+7],16,-155497632),s=g(s,l,p,f,u[h+10],23,-1094730640),f=g(f,s,l,p,u[h+13],4,681279174),p=g(p,f,s,l,u[h+0],11,-358537222),l=g(l,p,f,s,u[h+3],16,-722521979),s=g(s,l,p,f,u[h+6],23,76029189),f=g(f,s,l,p,u[h+9],4,-640364487),p=g(p,f,s,l,u[h+12],11,-421815835),l=g(l,p,f,s,u[h+15],16,530742520),s=g(s,l,p,f,u[h+2],23,-995338651),f=v(f,s,l,p,u[h+0],6,-198630844),p=v(p,f,s,l,u[h+7],10,1126891415),l=v(l,p,f,s,u[h+14],15,-1416354905),s=v(s,l,p,f,u[h+5],21,-57434055),f=v(f,s,l,p,u[h+12],6,1700485571),p=v(p,f,s,l,u[h+3],10,-1894986606),l=v(l,p,f,s,u[h+10],15,-1051523),s=v(s,l,p,f,u[h+1],21,-2054922799),f=v(f,s,l,p,u[h+8],6,1873313359),p=v(p,f,s,l,u[h+15],10,-30611744),l=v(l,p,f,s,u[h+6],15,-1560198380),s=v(s,l,p,f,u[h+13],21,1309151649),f=v(f,s,l,p,u[h+4],6,-145523070),p=v(p,f,s,l,u[h+11],10,-1120210379),l=v(l,p,f,s,u[h+2],15,718787259),s=v(s,l,p,f,u[h+9],21,-343485551),f=f+_>>>0,s=s+b>>>0,l=l+m>>>0,p=p+j>>>0}return r.endian([f,s,l,p])};u._ff=function(t,r,e,n,o,i,u){var a=t+(r&e|~r&n)+(o>>>0)+u;return(a<<i|a>>>32-i)+r},u._gg=function(t,r,e,n,o,i,u){var a=t+(r&n|e&~n)+(o>>>0)+u;return(a<<i|a>>>32-i)+r},u._hh=function(t,r,e,n,o,i,u){var a=t+(r^e^n)+(o>>>0)+u;return(a<<i|a>>>32-i)+r},u._ii=function(t,r,e,n,o,i,u){var a=t+(e^(r|~n))+(o>>>0)+u;return(a<<i|a>>>32-i)+r},u._blocksize=16,u._digestsize=16,t.exports=function(t,e){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(u(t,e));return e&&e.asBytes?n:e&&e.asString?i.bytesToString(n):r.bytesToHex(n)}}()},function(t,r){"use strict";!function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,r){return t<<r|t>>>32-r},rotr:function(t,r){return t<<32-r|t>>>r},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var r=0;r<t.length;r++)t[r]=e.endian(t[r]);return t},randomBytes:function(t){for(var r=[];t>0;t--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(t){for(var r=[],e=0,n=0;e<t.length;e++,n+=8)r[n>>>5]|=t[e]<<24-n%32;return r},wordsToBytes:function(t){for(var r=[],e=0;e<32*t.length;e+=8)r.push(t[e>>>5]>>>24-e%32&255);return r},bytesToHex:function(t){for(var r=[],e=0;e<t.length;e++)r.push((t[e]>>>4).toString(16)),r.push((15&t[e]).toString(16));return r.join("")},hexToBytes:function(t){for(var r=[],e=0;e<t.length;e+=2)r.push(parseInt(t.substr(e,2),16));return r},bytesToBase64:function(t){for(var e=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?e.push(r.charAt(o>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&e.push((r.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|r.indexOf(t.charAt(n))>>>6-2*o);return e}};t.exports=e}()},function(t,r){"use strict";var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var r=[],e=0;e<t.length;e++)r.push(255&t.charCodeAt(e));return r},bytesToString:function(t){for(var r=[],e=0;e<t.length;e++)r.push(String.fromCharCode(t[e]));return r.join("")}}};t.exports=e},function(t,r){"use strict";function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
t.exports=function(t){return null!=t&&(e(t)||n(t)||!!t._isBuffer)}},function(r,e){r.exports=t}])});